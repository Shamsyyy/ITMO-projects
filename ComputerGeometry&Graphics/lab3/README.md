# Лабораторная работа 3: Изучение алгоритмов псевдотонирования изображений

**Цель работы:** изучить алгоритмы и реализовать программу, применяющий алгоритм дизеринга к изображению в формате PGM (P5) с учетом гамма-коррекции.

**Описание:**\
Программа должна быть написана на C/C++ и не использовать внешние библиотеки.

Аргументы передаются через командную строку:\
**program.exe <имя_входного_файла> <имя_выходного_файла> <градиент> <дизеринг> <битность> <гамма>**\
где
- <имя_входного_файла>, <имя_выходного_файла>: формат файлов: PGM P5; ширина и высота берутся из <имя_входного_файла>;
- <градиент>: 0 - используем входную картинку, 1 - рисуем горизонтальный градиент (0-255) (ширина и высота берутся из <имя_входного_файла>);
- <дизеринг> - алгоритм дизеринга:
  - 0 – Нет дизеринга;
  - 1 – Ordered (8x8);
  - 2 – Random;
  - 3 – Floyd–Steinberg;
  - 4 – Jarvis, Judice, Ninke;
  - 5 - Sierra (Sierra-3);
  - 6 - Atkinson;
  - 7 - Halftone (4x4, orthogonal);
- <битность> - битность результата дизеринга (1..8);
- <гамма>: 0 - sRGB гамма, иначе - обычная гамма с указанным значением.

**Частичное решение:**
- <градиент> = 1;
- <дизеринг> = 0..3;
- <битность> = 1..8;
- <гамма> = 1 (аналогично отсутствию гамма-коррекции)\
+ корректно выделяется и освобождается память, закрываются файлы, есть обработка ошибок.\
**Полное решение:** все остальное

Если программе передано значение, которое не поддерживается – следует сообщить об ошибке.

Коды возврата:\
0 - ошибок нет\
1 - произошла ошибка\

В поток вывода ничего не выводится (printf, cout).\
Сообщения об ошибках выводятся в поток вывода ошибок:\
С: fprintf(stderr, "Error\n");\
C++: std::cerr

Следующие параметры гарантировано не будут выходить за обусловленные значения:
- <градиент> = 0 или 1;
- <битность> = 1..8;
- width и height в файле - положительные целые значения;
- яркостных данных в файле ровно width * height;
- <гамма> - вещественная неотрицательная.

____________________________________________________

Данная лабораторная работа выполнена на *C++17* (*Компилятор: g++ с флагом оптимизации "-O2", IDE: CLion, Mac OS*).

Проект состоит из следующих файлов:
- **CMakeLists.txt** - генератор Makefile для проекта;
- **cmake-build-debug** - сгенерированные с помощью CMakeLists.txt файлы, а также входной файл **thankyou.pgm** и выходной файл **output.pgm**;
- **file_exceptions(.h/.cpp)** - header/source классов исключений для класса PNM;
- **config.h** - файл с различными константами и define'ами;
- **pnm(.h/.cpp)** - header/source класса PNM;
- **main.cpp** - основной исполняемый файл проекта.

Проект уже собран и готов к запуску (предпочтительнее использовать CLion, но можно просто запустить *./lab3*, передав соответствующие аргументы командной строки).

Пример использования: **./lab3 thankyou.pgm output.pgm 0 6 1 2**

Эта команда берёт файл **thankyou.ppm** из папки *cmake-build-debug*, применяет к ней (без градиента) дизеринг алгоритмом Аткинсона с битностью *1* и гаммой *2*, и сохраняет в новом файле **output.ppm**.
